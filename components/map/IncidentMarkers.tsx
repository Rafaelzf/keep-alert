import { INCIDENT_TYPES } from '@/constants/incidents';
import { IncidentCategory } from '@/types/incident';
import { Images } from '@maplibre/maplibre-react-native';
import React from 'react';
import { Image } from 'react-native';

// Mapeamento de ícones FontAwesome para data URIs SVG
const ICON_SVGS: Record<string, string> = {
  'sack-xmark': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath fill='%23FFFFFF' d='M192 96h128l47.4-71.1C374 14.2 366.7 0 354.1 0h-196C145.3 0 138 14.2 144.6 24.9L192 96zm128 32H192c-53 0-96 43-96 96v224c0 17.7 14.3 32 32 32h256c17.7 0 32-14.3 32-32V224c0-53-43-96-96-96zm-64 256c-8.8 0-16-7.2-16-16V240c0-8.8 7.2-16 16-16s16 7.2 16 16v128c0 8.8-7.2 16-16 16z'/%3E%3C/svg%3E`,

  'gun': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 576 512'%3E%3Cpath fill='%23FFFFFF' d='M528 56c0-13.3-10.7-24-24-24s-24 10.7-24 24v8H32C14.3 64 0 78.3 0 96v64c0 17.7 14.3 32 32 32h448v8c0 13.3 10.7 24 24 24s24-10.7 24-24v-32-80-32zm-303 64l47 47H144c-8.8 0-16-7.2-16-16s7.2-16 16-16h81zm159 32l96 96v128c0 17.7-14.3 32-32 32H352v-64h-64v64H192c-17.7 0-32-14.3-32-32V248l96-96h128z'/%3E%3C/svg%3E`,

  'people-robbery': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 576 512'%3E%3Cpath fill='%23FFFFFF' d='M488 256c-13.3 0-24 10.7-24 24v144c0 13.3-10.7 24-24 24H136c-13.3 0-24-10.7-24-24V280c0-13.3-10.7-24-24-24s-24 10.7-24 24v144c0 39.8 32.2 72 72 72h304c39.8 0 72-32.2 72-72V280c0-13.3-10.7-24-24-24zm-200-80c44.2 0 80-35.8 80-80s-35.8-80-80-80-80 35.8-80 80 35.8 80 80 80z'/%3E%3C/svg%3E`,

  'people-pulling': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 576 512'%3E%3Cpath fill='%23FFFFFF' d='M112 48a48 48 0 1 1 96 0 48 48 0 1 1-96 0zm96 176V448c0 17.7-14.3 32-32 32s-32-14.3-32-32V304H112c-8.8 0-16-7.2-16-16s7.2-16 16-16h64c17.7 0 32-14.3 32-32V160c0-17.7 14.3-32 32-32h64c17.7 0 32 14.3 32 32v80c0 17.7 14.3 32 32 32h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H400V448c0 17.7-14.3 32-32 32s-32-14.3-32-32V224H208z'/%3E%3C/svg%3E`,

  'hand-rock': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 448 512'%3E%3Cpath fill='%23FFFFFF' d='M144 0c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16s16-7.2 16-16V16c0-8.8-7.2-16-16-16zm96 16v96c0 8.8 7.2 16 16 16s16-7.2 16-16V16c0-8.8-7.2-16-16-16s-16 7.2-16 16zm80 0v96c0 8.8 7.2 16 16 16s16-7.2 16-16V16c0-8.8-7.2-16-16-16s-16 7.2-16 16zM64 128c-35.3 0-64 28.7-64 64v144c0 44.2 35.8 80 80 80h48c44.2 0 80-35.8 80-80V192c0-35.3-28.7-64-64-64H64z'/%3E%3C/svg%3E`,

  'user-ninja': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 448 512'%3E%3Cpath fill='%23FFFFFF' d='M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-96 55.2C54 332.9 0 401.3 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7c0-81-54-149.4-128-171.1V362c27.6 7.1 48 32.2 48 62v40c0 8.8-7.2 16-16 16H336c-8.8 0-16-7.2-16-16s7.2-16 16-16V424c0-17.7-14.3-32-32-32s-32 14.3-32 32v24c8.8 0 16 7.2 16 16s-7.2 16-16 16H256c-8.8 0-16-7.2-16-16V424c0-29.8 20.4-54.9 48-62V304 288 272c0-8.8-7.2-16-16-16H176c-8.8 0-16 7.2-16 16v16 16 50.2z'/%3E%3C/svg%3E`,

  'fire-flame-curved': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3E%3Cpath fill='%23FFFFFF' d='M153.6 29.9l16-21.3C173.6 3.2 180 0 186.7 0C198.4 0 208 9.6 208 21.3v4c0 10.4 3.7 20.5 10.4 28.5l47.2 56.7c8.3 10 12.4 22.4 12.4 35.1v2.4c0 35.3-28.7 64-64 64c-17.7 0-32 14.3-32 32v128c0 53-43 96-96 96s-96-43-96-96c0-88.4 71.6-160 160-160c8.8 0 16-7.2 16-16s-7.2-16-16-16c-106 0-192 86-192 192s86 192 192 192s192-86 192-192V160c0-35.3-14.3-69.3-39.7-93.9L253.6 7.8C248.7 2.8 246.2 0 242.7 0c-5.5 0-10 4.5-10 10v10.7c0 8.3-4.3 16-11.4 20.4L179.6 64.1c-10.3 6.3-16.5 17.4-16.5 29.4v2.2c0 13.3 10.7 24 24 24h8c13.3 0 24-10.7 24-24V21.3c0-2.8-2.3-5.3-5.1-5.3c-1.4 0-2.8.6-3.7 1.6L153.6 29.9z'/%3E%3C/svg%3E`,

  'person-drowning': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 576 512'%3E%3Cpath fill='%23FFFFFF' d='M192 64a64 64 0 1 0 0-128 64 64 0 1 0 0 128zm-32 352c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32V288H160V416zM288 160c0-17.7-14.3-32-32-32H160c-17.7 0-32 14.3-32 32v96H288V160zM96 480c-17.7 0-32-14.3-32-32s14.3-32 32-32h32V288H32c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32H96v32zm384-64c0 17.7 14.3 32 32 32h32V448H448c-17.7 0-32 14.3-32 32z'/%3E%3C/svg%3E`,

  'volume-high': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 512'%3E%3Cpath fill='%23FFFFFF' d='M533.6 32.5C598.5 85.3 640 165.8 640 256s-41.5 170.8-106.4 223.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C557.5 398.2 592 329.2 592 256s-34.5-142.2-88.7-186.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM473.1 107c43.2 35.2 70.9 88.9 70.9 149s-27.7 113.8-70.9 149c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C475.3 341.3 496 301.1 496 256s-20.7-85.3-53.2-111.8c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zm-60.5 74.5C434.1 199.1 448 226.3 448 256s-13.9 56.9-35.4 74.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C393.1 284.4 400 271 400 256s-6.9-28.4-17.7-37.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM301.1 34.8C312.6 40 320 51.4 320 64V448c0 12.6-7.4 24-18.9 29.2s-25 3.1-34.4-5.3L131.8 352H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h67.8L266.7 40.1c9.4-8.4 22.9-10.4 34.4-5.3z'/%3E%3C/svg%3E`,

  'paw': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath fill='%23FFFFFF' d='M226.5 92.9c14.3 42.9-.3 86.2-32.6 96.8s-70.1-15.6-84.4-58.5s.3-86.2 32.6-96.8s70.1 15.6 84.4 58.5zM100.4 198.6c18.9 32.4 14.3 70.1-10.2 84.1s-59.7-.9-78.5-33.3S-2.7 179.3 21.8 165.3s59.7 .9 78.5 33.3zM69.2 401.2C121.6 259.9 214.7 224 256 224s134.4 35.9 186.8 177.2c3.6 9.7 5.2 20.1 5.2 30.5v1.6c0 25.8-20.9 46.7-46.7 46.7c-11.5 0-22.9-1.4-34-4.2l-88-22c-15.3-3.8-31.3-3.8-46.6 0l-88 22c-11.1 2.8-22.5 4.2-34 4.2C84.9 480 64 459.1 64 433.3v-1.6c0-10.4 1.6-20.8 5.2-30.5zM421.8 282.7c-24.5-14-29.1-51.7-10.2-84.1s54-47.3 78.5-33.3s29.1 51.7 10.2 84.1s-54 47.3-78.5 33.3zM310.1 189.7c-32.3-10.6-46.9-53.9-32.6-96.8s52.1-69.1 84.4-58.5s46.9 53.9 32.6 96.8s-52.1 69.1-84.4 58.5z'/%3E%3C/svg%3E`,

  'person-circle-question': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 576 512'%3E%3Cpath fill='%23FFFFFF' d='M208 48a48 48 0 1 1 96 0 48 48 0 1 1-96 0zM152 352V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V256.9L59.4 304.5c-9.1 15.1-28.8 20-43.9 10.9s-20-28.8-10.9-43.9l58.3-97c17.4-28.9 48.6-46.6 82.3-46.6h29.7c33.7 0 64.9 17.7 82.3 46.6l44.9 74.7c-16.1 17.6-28.6 38.5-36.6 61.5c-1.9-1.8-3.5-3.9-4.9-6.3L232 256.9V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V352H152zm280 0a144 144 0 1 1 0 288 144 144 0 1 1 0-288zm0 240a24 24 0 1 0 0-48 24 24 0 1 0 0 48zm-32-120v-16c0-17.7 14.3-32 32-32h.7c16.8 0 31.1 13 32 29.8c.4 8.5-2.4 16.9-7.8 23.1l-17.5 20.1c-3.8 4.3-5.9 9.9-5.9 15.6v16.6c0 8.8-7.2 16-16 16s-16-7.2-16-16v-16.6c0-14.5 5.3-28.4 14.9-39.2l17.5-20.1c1.4-1.6 2.1-3.7 2-5.8c-.2-4.2-3.8-7.5-8-7.5H432c-4.4 0-8 3.6-8 8v16c0 8.8-7.2 16-16 16s-16-7.2-16-16z'/%3E%3C/svg%3E`,

  'shield-dog': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath fill='%23FFFFFF' d='M269.4 2.9C265.2 1 260.7 0 256 0s-9.2 1-13.4 2.9L54.3 82.8c-22 9.3-38.4 31-38.3 57.2c.5 99.2 41.3 280.7 213.6 363.2c16.7 8 36.1 8 52.8 0C454.7 420.7 495.5 239.2 496 140c.1-26.2-16.3-47.9-38.3-57.2L269.4 2.9zM144 160a32 32 0 1 1 64 0 32 32 0 1 1-64 0zm128-16c8.8 0 16 7.2 16 16v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16H288v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V224H224c-8.8 0-16-7.2-16-16s7.2-16 16-16h32V160c0-8.8 7.2-16 16-16z'/%3E%3C/svg%3E`,

  'square-person-confined': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 448 512'%3E%3Cpath fill='%23FFFFFF' d='M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM224 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm-64 64c-8.8 0-16 7.2-16 16v96h64V336h32v32h64V272c0-8.8-7.2-16-16-16H160z'/%3E%3C/svg%3E`,

  'child': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3Cpath fill='%23FFFFFF' d='M96 64a64 64 0 1 1 128 0A64 64 0 1 1 96 64zm48 320v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V287.8L59.1 321c-9.4 15-29.2 19.4-44.1 10S-4.5 301.9 4.9 287l39.9-63.3C69.7 184 113.2 160 160 160s90.3 24 115.2 63.6L315.1 287c9.4 15 4.9 34.7-10 44.1s-34.7 4.9-44.1-10L240 287.8V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V384H144z'/%3E%3C/svg%3E`,

  'truck-field': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 512'%3E%3Cpath fill='%23FFFFFF' d='M32 32C14.3 32 0 46.3 0 64v80 48 64 80c0 17.7 14.3 32 32 32H64c17.7 0 32-14.3 32-32H544c0 17.7 14.3 32 32 32h32c17.7 0 32-14.3 32-32V256 192 144 64c0-17.7-14.3-32-32-32H32zM96 240v96H32V240H96zm384 0H416V144h64V240zm64-96v96H480V144h64zM352 144V240H160V144H352zM96 144v64H32V144H96z'/%3E%3C/svg%3E`,

  'bolt-lightning': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3E%3Cpath fill='%23FFFFFF' d='M0 256L28.5 28c2-16 15.6-28 31.8-28H228.9c15 0 27.1 12.1 27.1 27.1c0 3.2-.6 6.5-1.7 9.5L208 160H347.3c20.2 0 36.7 16.4 36.7 36.7c0 7.4-2.2 14.6-6.4 20.7l-192.2 281c-5.9 8.6-15.6 13.7-25.9 13.7h-2.9c-15.7 0-28.5-12.8-28.5-28.5c0-2.3 .3-4.6 .9-6.9L176 288H32c-17.7 0-32-14.3-32-32z'/%3E%3C/svg%3E`,

  'faucet-drip': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath fill='%23FFFFFF' d='M192 96v32H128V96c0-17.7 14.3-32 32-32s32 14.3 32 32zm96 0v32h64V96c0-17.7-14.3-32-32-32s-32 14.3-32 32zm-96 96v224c0 17.7-14.3 32-32 32s-32-14.3-32-32V192h64zm96 0v224c0 17.7 14.3 32 32 32s32-14.3 32-32V192H288zM64 160h32H416h32c17.7 0 32 14.3 32 32s-14.3 32-32 32H448 416 96 64 32C14.3 224 0 209.7 0 192s14.3-32 32-32H64zm320 96H128V416c0 53 43 96 96 96s96-43 96-96V256z'/%3E%3C/svg%3E`,

  'tree': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 448 512'%3E%3Cpath fill='%23FFFFFF' d='M210.6 5.9L62 169.4c-3.9 4.2-6 9.8-6 15.5C56 197.7 66.3 208 79.1 208H104L30.6 281.4c-4.2 4.2-6.6 10-6.6 16C24 309.9 34.1 320 46.6 320H80L5.4 409.5C1.9 413.7 0 419 0 424.5c0 13 10.5 23.5 23.5 23.5H192v32c0 17.7 14.3 32 32 32s32-14.3 32-32V448H424.5c13 0 23.5-10.5 23.5-23.5c0-5.5-1.9-10.8-5.4-15L368 320h33.4c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16L344 208h24.9c12.7 0 23.1-10.3 23.1-23.1c0-5.7-2.1-11.3-6-15.5L237.4 5.9C234 2.1 229.1 0 224 0s-10 2.1-13.4 5.9z'/%3E%3C/svg%3E`,

  'road': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 576 512'%3E%3Cpath fill='%23FFFFFF' d='M256 32H181.2c-27.1 0-51.3 17.1-60.3 42.6L3.1 407.2C1.1 413 0 419.2 0 425.4C0 455.5 24.5 480 54.6 480H256V416c0-17.7 14.3-32 32-32s32 14.3 32 32v64H521.4c30.2 0 54.6-24.5 54.6-54.6c0-6.2-1.1-12.4-3.1-18.2L455.1 74.6C446 49.1 421.9 32 394.8 32H320V96c0 17.7-14.3 32-32 32s-32-14.3-32-32V32zm0 192V160c0-17.7 14.3-32 32-32s32 14.3 32 32v64c0 17.7-14.3 32-32 32s-32-14.3-32-32zm32 64c17.7 0 32 14.3 32 32v32c0 17.7-14.3 32-32 32s-32-14.3-32-32V320c0-17.7 14.3-32 32-32z'/%3E%3C/svg%3E`,

  'person-through-window': `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 512'%3E%3Cpath fill='%23FFFFFF' d='M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm40 96a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm152 48a24 24 0 1 1 48 0 24 24 0 1 1-48 0zM152 352a24 24 0 1 1 0 48 24 24 0 1 1 0-48zM256 240c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16v48H256V240zm0 80h80v48c0 8.8-7.2 16-16 16H272c-8.8 0-16-7.2-16-16V320zm192-112a80 80 0 1 0-160 0 80 80 0 1 0 160 0zM384 448V384h64c17.7 0 32 14.3 32 32v32H384zm96 0V416c0-35.3-28.7-64-64-64H352c-17.7 0-32 14.3-32 32v64H256V384h64V288H256V208c0-44.2-35.8-80-80-80s-80 35.8-80 80v80h64v96h64v64H64c-35.3 0-64-28.7-64-64V256H576v64c0 35.3-28.7 64-64 64H448z'/%3E%3C/svg%3E`,
};

export function IncidentMarkerImages() {
  const images: Record<string, any> = {};

  INCIDENT_TYPES.forEach((type) => {
    const iconSvg = ICON_SVGS[type.icon];
    if (iconSvg) {
      // Cria um círculo colorido com o ícone branco dentro
      const markerSvg = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'%3E%3Ccircle cx='24' cy='24' r='22' fill='${encodeURIComponent(type.color)}' stroke='%23FFFFFF' stroke-width='4'/%3E%3Cg transform='translate(14, 14) scale(0.04)'%3E${iconSvg.split("'%3E")[1].split('%3C/svg')[0]}%3C/g%3E%3C/svg%3E`;

      images[type.id] = { uri: markerSvg };
    }
  });

  return <Images images={images} />;
}
